# 生命周期、表单输入、插槽

## 目录

[生命周期](#jump1)

[表单输入](#jump2)

[React插槽](#jump3)

[综合案例：新闻页面](#jump4)
                      
---	

<span id="jump1"></span>

## 生命周期

### 什么是生命周期

生命周期即是组件从实例化到渲染到最终从页面中销毁，整个过程就是生命周期

在这生命周期中，我们有许多可以调用的事件，也俗称为钩子函数

生命周期的3个状态：

- Mounting:将组件插入到DOM中

- Updating:将数据更新到DOM中

- Unmounting:将组件移除DOM中

### 生命周期中的钩子函数

- CompontWillMount :组件将要渲染，AJAX，添加动画前的类

- CompontDidMount:组件渲染完毕,添加动画

- compontWillReceiveProps:组件将要接受props数据，查看接收props的数据什么

- ShouldComponentUpdate：组件接收到新的state或者props,判断是否更新。返回布尔值

- CompontWillUpdate:组件将要更新

- ComponentDidUpdate:组件已经更新

- ComponentwillUnmount:组件将要卸载

---

<span id="jump2"></span>

## 表单输入

注意：必须绑定value和onChange事件

onChange的作用：使用 onChange 事件来监听 input 的变化，并修改 state

```javascript
render() {
  let value = this.state.value;
  return <div>
    <input type="text" value={value} onChange={this.handleChange} />
  </div>;
}

handleChange(event) {
  this.setState({ value: event.target.value });
}
```

---

<span id="jump3"></span>

## React插槽

### 简介

组件中写入内容，这些内容可以被识别和控制

React需要自己开发支持插槽功能

原理：组件中写入的HTML，可以传入到props中

### 一般插槽

步骤

1. 在父组件中使用子组件，然后插入需要的内容

```javascript
class ParentCom extends React.Component {
	render() {
		return (
		    /* 使用子组件 */
			<ChildCom>
				{/* 往ParentCom中插入3个h2 */}
				<h2 data-name="a">子组件1</h2>
				<h2 data-name="b">子组件2</h2>
				<h2 data-name="c">子组件3</h2>
			</ChildCom>
		)
	}
}
```

2. 在子组件中利用this.props.children将父组件传过来的内容进行渲染

```javascript
class ChildCom extends React.Component {
    render() {
        return (
            <div>
                {/* 将ParentCom传过来的props进行渲染 */}
                {this.props.children}
        )
    }
}
```

### 具名插槽

步骤

1. 在父组件中使用子组件，然后插入需要的内容并做好标记

```javascript
class ParentCom extends React.Component {
    render() {
        return (
			/* 使用子组件 */
			<ChildCom>
				{/* 往ChildCom中插入3个h1，并利用data-position做标记 */}
				<h1 data-position="header">这是放置到头部的内容</h1>
				<h1 data-position="main">这是放置到主要的内容</h1>
				<h1 data-position="footer">这是放置到尾部的内容</h1>
			</ChildCom>
        )
    }
}
```

2. 将父组件传过来的props分别放到几个新建的变量中以便将之分配到指定位置，再将这些变量分别放到目标位置渲染

```javascript
class ChildCom extends React.Component {
    render() {
        /* 把ParentCom传过来的props分别保存到3个变量中 */
        let headerCom, mainCom, footerCom;
        this.props.children.forEach((item, index) => {
            if (item.props['data-position'] === 'header') {
                headerCom = item
            } else if (item.props['data-position'] === 'main') {
                mainCom = item
            } else {
                footerCom = item
            }
        })
        /* 将上述3个变量分别渲染到目标区域 */
        return (
            <div>
                <div className="header">
                    {headerCom}
                </div>
                <div className="main">
                    {mainCom}
                </div>
                <div className="footer">
                    {footerCom}
                </div>
            </div>
        )
    }
}
```
---

<span id="jump4"></span>

## 综合案例：分类新闻

[分类新闻页面](https://github.com/FooderLeoYo/React-StudyNote/tree/master/assets/projects/分类新闻页面)
